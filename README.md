# Image Processing

[![Java](https://img.shields.io/badge/Java-11%2B-orange?logo=java)](https://www.oracle.com/java/technologies/javase-downloads.html)
[![License: MIT](https://img.shields.io/badge/License-MIT-blue.svg)](LICENSE)
![Build](https://img.shields.io/badge/build-manual-lightgrey)
[![Docs](https://img.shields.io/badge/docs-Javadoc-green)](./doc/index.html)

This repository features an image processing program that applies grayscale transformation to batches of images.
These images are retrieved from a list of URLs pointing to public domain images available on the Web. The program
downloads each image and converts it to grayscale. In the current version, the list of image URLs is generated by
a lightweight generative artificial intelligence (AI) model.

---

## 📂 Repository Structure

This repository is structured as follows:

```
.
├── doc/                        # Javadoc documentation
├── src/main/java               # Source code
│   ├── FileDownloader.java     # Downloads an image from its URL on the Web
│   ├── ImageProcessor.java     # Applies transformation to an image
│   ├── Main.java               # Main program
│   ├── URLGenerator.java       # Generates image URLs
└── pom.xml                     # Maven configuration file
└── README.m
```

---

## 💻 Getting Started

### 📋 Prerequisites

- Java 11+ (works with any modern JDK)
- A terminal or IDE (IntelliJ, Eclipse, VS Code, etc.)
- [Maven](https://maven.apache.org)
- [Google Gemini](https://gemini.google.com/)

Maven helps manage the following dependencies to this project:

- [Google GenAI Java SDK](https://github.com/googleapis/java-genai) (used version: 1.17.0)
- [OpenPnP OpenCV](https://github.com/openpnp/opencv) (used version: 4.9.0)
- [Apache Commons Text](https://commons.apache.org/proper/commons-text/) (used version: 1.14.0)
- [Apache Commons IO](https://commons.apache.org/proper/commons-io/) (used version: 2.20.0)

### 🤖 Integration with Google Gemini

The current implementation of this project utilizes [Google Gemini 2.5 Flash-Lite](https://ai.google.dev/gemini-api/docs/models) as
the IA model to generate the list of image URLs. The integration with Google Gemini is done via the 
[Gemini API](https://ai.google.dev/api), more precisely using the 
[Google GenAI SDK](https://ai.google.dev/gemini-api/docs/libraries) available for Java to abstract calls to the methods 
defined in the API. In this project, the Google GenAI SDK library is integrated with the program via Maven. 

Interacting with the Gemini API requires an [API key](https://ai.google.dev/gemini-api/docs/api-key). In the current 
implementation, the API key is [explicitly provided](https://ai.google.dev/gemini-api/docs/api-key#provide-api-key-explicitly) 
from a file.

The [`URLGenerator`](src/main/java/URLGenerator.java) class is responsible for generating the list of image URLs.
This class uses two prompts submitted to Google Gemini via a client object that manages the interactions with the 
models. The first one requests the generation of image URLs:

```
Generate {numimages} public domain image URL (either JPEG or PNG format) from trusted public domain image repositories. 
The URL must directly point to a valid image file ending with .jpg or .png and the file size must be less than 200 KB. 
Provide the final image URLs in plain text.
```

However, there is no guarantee that this prompt generates only the list of image URLs. To circumvent this issue, a
second prompt is used to retrieve only the list of URLs from the output of the first prompt:

```
Extract all URLs from the following contents into a plain text list. Each URL must be on a new line. 
These are the contents: {output of the first prompt}
```

### ☑️ URL Validity Check

To avoid generating a URL to an image that is not directly accessible (e.g., image not found, redirecting to 
another page where the image is posted, etc.), an HTTP GET request is done for each generated URL. In case of the URL
is inaccessible, another URL is generated. This is done until reaching the number of URLs defined for the program. 
The downloaded images are saved into a project directory named as `images`.

---

## 🤝 Contributing

Contributions are welcome! Fork this repository and submit a pull request 🚀

---

## 📜 License

This project is licensed under the [MIT License](LICENSE).
